{% extends "system_index.html" %}
{% load static %}

{% block overskrift %}
	Alle systemkategorier
{% endblock overskrift %}

{% block ekstrameny_kategori %}
	{% url 'alle_hovedkategorier' as url_alle_hovedkategorier %}
		<a href="{{url_alle_hovedkategorier}}" class="btn btn-sm btn-link {% if url_alle_hovedkategorier in request.path %}fremhev{% endif %}">Alle hovedkategorier</a>
	{% if user.is_authenticated %}
		<a href="/admin/systemoversikt/systemkategori/add/" class="btn btn-sm btn-link">Registrer ny kategori</a>

		{% url 'uten_systemkategorier' as url_uten_systemkategorier %}
		<a href="{{url_uten_systemkategorier}}" class="btn btn-sm btn-link {% if url_uten_systemkategorier in request.path %}fremhev{% endif %}">Mangler subkategori</a>
		{% endif %}
{% endblock ekstrameny_kategori %}


{% block hovedinnhold %}

	<p>Dette er kategorier som forvaltes av UKE. De ble innf√∏rt i forbindelse med systemkonsolideringsprosjektet. Alle systemer skal ha en eller flere kategorier. Viser {{ kategorier.count }} kategorier.</p>

	<table class="tablesorter">
	<thead>
	<tr>
		{% if user.is_authenticated %}
		<th class="filter-false"></th>
		{% endif %}
		<th>Hovedkategori</th>
		<th>Kategorinavn</th>
		<th>Antall programvarer i kategori</th>
		<th>Antall systemer i kategori</th>
		<th>Definisjon</th>
	</tr>
	</thead>
	<tbody>
	{% for kat in kategorier %}
	<tr>
		{% if user.is_authenticated %}
		<td><a target="_blank" href="/admin/systemoversikt/systemkategori/{{ kat.pk }}/change/"><img style="width: 14px; margin: 3px;" src="{% static 'open-iconic/svg/pencil.svg' %}" alt="rediger"></a></td>
		{% endif %}
		<td>{% for hovedkat in kat.systemhovedkategori_systemkategorier.all %} {{ hovedkat.hovedkategorinavn }}<br> {% endfor %}</td>
		{% url 'systemkategori' pk=kat.pk as url_systemkategori %}
		<td><a href="{{ url_systemkategori }}">{{ kat }}</a></td>
		<td>{{ kat.programvare_systemkategorier.count }}</td>
		<td>{{ kat.system_systemkategorier.count }}</td>
		<td>{{ kat.definisjon|default:'' }}</td>
	</tr>
	{% endfor %}
	</tbody>
	</table>

{% endblock hovedinnhold %}