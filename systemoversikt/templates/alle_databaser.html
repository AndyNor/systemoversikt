{% extends "index.html" %}
{% load humanize %}
{% load static %}

{% block underoverskrift %}
	CMDB databaser (Felles IKT-plattform)
{% endblock underoverskrift %}

{% block main_content %}
<p>Viser {{ databaser.count }} maskiner.</p>

{% comment %}
<table id="stickyheader" class="table table-sm tablesorter">
	<thead>
		<th>OS hovedversjon</th>
		<th>OS versjonsnummer</th>
		<th>Antall</th>
	</thead>
	<tbody>
	{% for os in maskiner_stats %}
		<tr>
			<td>{{ os.major|default:"Ukjent" }}</td>
			<td>{{ os.minor|default:"Ukjent" }}</td>
			<td>{{ os.count }}</td>
		</tr>
	{% endfor %}
	</tbody>
</table>
{% endcomment %}

	<table id="stickyheader" class="table table-sm tablesorter">
	<thead>
	<tr>
		<th width="25%">db_database</th>
		<th>sub_name</th>
		<th>db_used_for</th>
		<th>db_version</th>
		<th>db_comments</th>
		<th>db_u_datafilessizekb</th>
	</tr>
	</thead>
	<tbody>
	{% for db in databaser %}
	<tr {% if not db.db_operational_status %} style="color: #d6d6d6;" {% endif %}>
		<td>{{ db.db_database }}</td>
		<td>
			{% for subservice in db.sub_name.all %}
			<a href="{% url 'cmdbdevice' pk=subservice.pk %}">{{ subservice }}</a><br>
			{% endfor %}
		</td>
		<td>{{ db.db_used_for }}</td>
		<td>{{ db.db_version }}</td>
		<td>{{ db.db_comments }}</td>
		<td>{{ db.db_u_datafilessizekb }} ({{ db.db_u_datafilessizekb|filesizeformat }})</td>
	</tr>
	{% endfor %}
	</tbody>
	</table>
{% endblock main_content %}