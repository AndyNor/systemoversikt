{% extends "system_index.html" %}
{% load static %}
{% load templatetags %}

{% block overskrift %}
	Oslo kommunes systemoversikt
{% endblock overskrift %}

{% block hovedinnhold %}

	<h6>Velkommen til Kartoteket!</h6>
	<p>Her finner du Oslo kommunes systemoversikt. I tillegg finner du en del rapporter basert på data fra driftsmiljøet (CMDB) og fra Microsoft 365. I systemoversikten registrerer vi driftsplattformer, systemer og programvare. Systemer er samlinger av servere, databaser og programvare inn under et forvaltningsteam, og kjører på én eller flere driftsplattformer. Infrastruktur og integrasjoner inngår også under systembegrepet. Programvare kan kjøres på servere eller klienter, og kobles til systemet det tilhører. Brukerdokumentasjonen finner du på <a class="btn btn-sm" style="padding: 5px; font-weight: normal; margin: 5px; background-color: #d1ecf1;" target="_blank" href="https://oslokommune.sharepoint.com/sites/abcff/SitePages/Systemoversikt-p%C3%A5-felles-IKT-plattform.aspx">SharePoint</a></p>

	<hr>

	<p>Kartoteket er tilgangsstyrt. Du må logge på "logg inn"-knappen ved siden av søkefeltet for å aktivere rollene dine. Se <a href="{% url 'roller' %}" class="btn btn-sm" style="padding: 5px; font-weight: normal; margin: 5px; background-color: #d1ecf1;">rolleoversikt</a> for nærmere beskrivelser av hvordan tilgangsstyringen fungerer.

	For oversikt over behandlinger må du gå til <a target="_blank" href="https://behandlingsoversikt.k8s.oslo.kommune.no" class="btn btn-sm" style="padding: 5px; font-weight: normal; margin: 5px; background-color: #d1ecf1;">Behandlingsoversikten</a>

	Det pågår nå et arbeid med å modernisere både IKT-instruksen og systemoversikten i en ny løsning som per nå går under navnet "System og tjenesteoverikt". For mer informasjon om fremdriften kan du følge med på <a target="_blank" href="https://engage.cloud.microsoft/main/groups/eyJfdHlwZSI6Ikdyb3VwIiwiaWQiOiI2NTU0NzAwMTg1NyJ9/all" class="btn btn-sm" style="padding: 5px; font-weight: normal; margin: 5px; background-color: #d1ecf1;">VI/SAM/System og tjenesteoversikt</a>

	Frem til den nye løsningen formelt er lansert, er det her i Kartoteket vi fører systemoversikt.</p>

	<hr>

	Vi har to nivåer med visualisering av systemer. Det detaljerte nivået finner du ved å gå inn på virksomheter og velge en av etatene eller bydelen. Den andre er på kommunalt nivå og ligger på <a class="btn btn-sm" style="padding: 5px; font-weight: normal; margin-left: 5px; background-color: #d1ecf1;" href="{% url 'home_chart' %}">Denne siden</a>

	<hr>

	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-6">

				<h6>Antall systemer i Kartoteket</h6>
				<h1>{{ antall_systemer }}</h1>
				<p>De {{nyeste_systemer.count}} nyeste:</p>
				<ol style="column-count: 2;">
				{% for system in nyeste_systemer %}
					{% url "systemdetaljer" system.pk as url_systemdetaljer %}
					<li><a href="{{ url_systemdetaljer }}">{{ system }}</a> ({{ system.systemeier.virksomhetsforkortelse }})</li>
				{% endfor %}
				</ol>

			</div>
			<div class="col-sm-6">

				<h6>Antall programvarer i Kartoteket</h6>
				<h1>{{ antall_programvarer }}</h1>
				<p>De {{nyeste_programvarer.count}} nyeste:</p>
				<ol style="column-count: 2;">
				{% for programvare in nyeste_programvarer %}
					{% url "programvaredetaljer" programvare.pk as url_programvaredetaljer %}
					<li><a href="{{ url_programvaredetaljer }}">{{ programvare.programvarenavn }}</a></li>
				{% endfor %}
				</ol>

			</div>

		</div>
	</div>


	<hr>

	<h6>Finn system eller programvare basert på kategori</h6>
	<ul style="column-count:3;">
		{% for kategori in kategorier %}
			{% url 'systemkategori' pk=kategori.pk as url_systemkategori %}
			<li><a href="{{ url_systemkategori }}">{{ kategori.kategorinavn }}</a>
			{% for hovedkategori in kategori.systemhovedkategori_systemkategorier.all %}
				({{hovedkategori}})
			{% endfor %}
			</li>
		{% endfor %}
	</ul>


	<hr>

	<h6>Endringslogg for Kartoteket</h6>
	{% for nyhet in nyheter %}
		<li>
			<span class="badge badge-light">{{ nyhet.tidspunkt|date:"Y-m-d" }}</span> {{ nyhet.beskrivelse }}
			{% if nyhet.reverse_url %}
				{% url nyhet.reverse_url as url_link %}
				<a href="{{ url_link }}"> Gå til siden.</a>
				{% endif %}
		</li>
	{% empty %}
		<p>Ingen nyheter å vise</p>
	{% endfor %}
	{% if nyheter|length > 0 %}
		<br><a href="{% url 'alle_nyheter' %}">Se arkiv</a>
	{% endif %}

{% endblock hovedinnhold %}